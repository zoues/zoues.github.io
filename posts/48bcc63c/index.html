<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="From the perspective of resource allocation, the cluster appears relatively balanced. However, in terms of actual load, many hotspots have already emerged. This can lead to competition for shared reso">
<meta property="og:type" content="article">
<meta property="og:title" content="Container Interference Detection and Mitigation:Part 1">
<meta property="og:url" content="https://zoues.com/posts/48bcc63c/index.html">
<meta property="og:site_name" content="zouyee">
<meta property="og:description" content="From the perspective of resource allocation, the cluster appears relatively balanced. However, in terms of actual load, many hotspots have already emerged. This can lead to competition for shared reso">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://pic.imgdb.cn/item/6691e507d9c307b7e9943c62.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6691e5acd9c307b7e994e785.png">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-f4551e163f574dfe4a98dc1847272e05_720w.webp">
<meta property="og:image" content="https://frankdenneman.nl/wp-content/uploads/2019/10/03-Rome-Chiplet.png">
<meta property="og:image" content="https://lynnapan.github.io/images/cache/8.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6691e693d9c307b7e995d1f8.png">
<meta property="og:image" content="https://pic.imgdb.cn/item/6691e6c8d9c307b7e9960b0d.png">
<meta property="og:image" content="https://justadogistaken.github.io/images/cpi-1.png">
<meta property="og:image" content="https://justadogistaken.github.io/images/cpi-2.png">
<meta property="article:published_time" content="2024-07-19T23:48:30.000Z">
<meta property="article:modified_time" content="2024-07-20T11:26:17.419Z">
<meta property="article:author" content="zouyee">
<meta property="article:tag" content="cloudnative">
<meta property="article:tag" content="kubernetes">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.imgdb.cn/item/6691e507d9c307b7e9943c62.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Container Interference Detection and Mitigation:Part 1</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
      <link rel="alternate" href="/true" title="zouyee" type="application/atom+xml" />
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 7.1.1"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/zouyee">Projects</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/posts/11831eff/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/posts/e9953e7c/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zoues.com/posts/48bcc63c/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zoues.com/posts/48bcc63c/&text=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zoues.com/posts/48bcc63c/&title=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zoues.com/posts/48bcc63c/&is_video=false&description=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Container Interference Detection and Mitigation:Part 1&body=Check out this article: https://zoues.com/posts/48bcc63c/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zoues.com/posts/48bcc63c/&title=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zoues.com/posts/48bcc63c/&title=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zoues.com/posts/48bcc63c/&title=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zoues.com/posts/48bcc63c/&title=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zoues.com/posts/48bcc63c/&name=Container Interference Detection and Mitigation:Part 1&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://zoues.com/posts/48bcc63c/&t=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Technical-Background"><span class="toc-number">1.</span> <span class="toc-text">Technical Background</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Terminology"><span class="toc-number">1.1.</span> <span class="toc-text">Terminology</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-CPI"><span class="toc-number">1.1.1.</span> <span class="toc-text">a. CPI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-LLC"><span class="toc-number">1.1.2.</span> <span class="toc-text">b. LLC</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Metric-Collection"><span class="toc-number">1.2.</span> <span class="toc-text">Metric Collection</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-Node-Exporter"><span class="toc-number">1.2.1.</span> <span class="toc-text">a. Node Exporter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-cgroup-perf-event"><span class="toc-number">1.2.2.</span> <span class="toc-text">b. cgroup perf_event</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Intel-RDT"><span class="toc-number">1.3.</span> <span class="toc-text">Intel RDT</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#RDT-Technology-Architecture"><span class="toc-number">1.3.0.1.</span> <span class="toc-text">RDT Technology Architecture</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Theoretical-Foundation"><span class="toc-number">2.</span> <span class="toc-text">Theoretical Foundation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CPI2-CPU-Performance-Isolation-for-Shared-Compute-Clusters"><span class="toc-number">2.1.</span> <span class="toc-text">CPI2: CPU Performance Isolation for Shared Compute Clusters</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Performance-Metrics"><span class="toc-number">2.1.1.</span> <span class="toc-text">Performance Metrics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Core-Methodology"><span class="toc-number">2.1.2.</span> <span class="toc-text">Core Methodology</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Conclusions"><span class="toc-number">2.1.3.</span> <span class="toc-text">Conclusions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LIBRA-Clearing-the-Cloud-Through-Dynamic-Memory-Bandwidth-Management"><span class="toc-number">2.2.</span> <span class="toc-text">LIBRA: Clearing the Cloud Through Dynamic Memory Bandwidth Management</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Performance-Metrics-1"><span class="toc-number">2.2.1.</span> <span class="toc-text">Performance Metrics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Core-Methodology-1"><span class="toc-number">2.2.2.</span> <span class="toc-text">Core Methodology</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Conclusions-1"><span class="toc-number">2.2.3.</span> <span class="toc-text">Conclusions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PARTIES-QoS-Aware-Resource-Partitioning-for-Multiple-Interactive-Services"><span class="toc-number">2.3.</span> <span class="toc-text">PARTIES: QoS-Aware Resource Partitioning for Multiple Interactive Services</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Metrics"><span class="toc-number">2.3.1.</span> <span class="toc-text">Metrics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Core-Methodology-2"><span class="toc-number">2.3.2.</span> <span class="toc-text">Core Methodology</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">3.</span> <span class="toc-text">Reference</span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Container Interference Detection and Mitigation:Part 1
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">zouyee</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2024-07-19T23:48:30.000Z" class="dt-published" itemprop="datePublished">2024-07-20</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/cloudnative/" rel="tag">cloudnative</a>, <a class="p-category" href="/tags/kubernetes/" rel="tag">kubernetes</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <p>From the perspective of resource allocation, the cluster appears relatively balanced. However, in terms of actual load, many hotspots have already emerged. This can lead to competition for shared resources between applications, causing performance interference in core business processes. As a result, application response times often exhibit long-tail behavior, leading to a decline in service quality and an increased likelihood of failures. This inter-application resource contention and performance interference (such as the “noisy neighbor” phenomenon) make application scheduling and resource management extremely complex. Therefore, it is crucial to consider how to reduce performance interference between applications to ensure business stability.</p>
<p><img src="https://pic.imgdb.cn/item/6691e507d9c307b7e9943c62.png"></p>
<p>The “noisy neighbor” problem is a common phenomenon in cloud infrastructure, referring to a situation where the resources required by an application are heavily consumed by other applications on the same compute node, leading to degraded performance for the application, such as increased latency. This issue is particularly troublesome for business-critical applications but is often difficult to identify.</p>
<p>The root cause lies in the lack of strict isolation policies during resource sharing. From a resource perspective, this includes CPU, memory (L1&#x2F;L2&#x2F;L3 cache), network, and block I&#x2F;O. From a hardware topology perspective, it involves CPU caches, memory bandwidth, and more. CPU cores are tightly coupled with other shared resources such as the last level cache (LLC) and memory bandwidth. If there are no effective isolation strategies in place when allocating shared resources, problems arise. For instance, sibling hyperthreads share the same physical CPU core, workloads on different physical CPU cores share the same last level cache, memory controller, and I&#x2F;O bus bandwidth, and even workloads on different physical CPU sockets share CPU interconnect bandwidth, the same storage devices, or I&#x2F;O bus. In such cases, the “noisy neighbor” often requires more resources and takes more time to complete the same task. This can lead to critical applications not getting the resources they need, causing performance degradation and stalls.</p>
<p>Kubernetes offers a CPU manager and device plugin manager for hardware resource allocation, such as CPUs and devices (SR-IOV, GPUs). Currently, Kubernetes also provides a topology manager to achieve NUMA topology awareness, coordinate resources, and ensure optimal performance for critical workloads. However, these features do not directly address the “noisy neighbor” problem.</p>
<p>To address this issue, the following optimization strategies can be considered:</p>
<ol>
<li><strong>Resource Requests and Limits</strong>: Set reasonable resource requests and limits for each Pod in Kubernetes to ensure that applications can obtain sufficient resources during contention.</li>
<li><strong>Affinity and Anti-affinity Rules</strong>: Use Kubernetes affinity and anti-affinity rules to deploy critical applications separately from other high resource-consuming applications to reduce resource contention.</li>
<li><strong>Isolation Policies</strong>: Utilize Kubernetes CPU isolation policies to ensure that critical applications have exclusive access to specific CPU cores, reducing competition for shared resources.</li>
<li><strong>Priority and Preemption</strong>: Set the priority of applications to ensure that critical applications can obtain resources first and preempt resources from lower-priority applications if necessary.</li>
<li><strong>NUMA-aware Scheduling</strong>: Through Kubernetes topology manager, ensure that critical applications are allocated resources within NUMA nodes to maximize the efficiency of local resource use and reduce latency from cross-node resource access.</li>
<li><strong>Dedicated Hardware</strong>: For high-performance applications, consider using dedicated hardware (such as GPUs, FPGAs) or isolated physical nodes to avoid sharing resources with other applications.</li>
<li><strong>Monitoring and Adjustment</strong>: Continuously monitor the resource usage and performance of applications, and adjust resource allocation strategies promptly to ensure the stable operation of critical applications.</li>
</ol>
<p>By implementing these optimization strategies, the “noisy neighbor” problem can be largely mitigated, ensuring the performance and stability of critical applications. Isolation policies, priority and preemption, and NUMA-aware scheduling are resource QoS optimization strategies for application scenarios. So, how do we measure performance interference?</p>
<blockquote>
<p>NOTE: Mixed deployment, here “mixed” essentially means “distinguishing priorities”. Narrowly, it can be simply understood as “online + offline” (offline) mixed deployment, broadly, it can be extended to a wider range of applications: multi-priority business mixed deployment.</p>
</blockquote>
<hr>
<h2 id="Technical-Background"><a href="#Technical-Background" class="headerlink" title="Technical Background"></a>Technical Background</h2><h3 id="Terminology"><a href="#Terminology" class="headerlink" title="Terminology"></a>Terminology</h3><h4 id="a-CPI"><a href="#a-CPI" class="headerlink" title="a. CPI"></a>a. CPI</h4><p>CPI stands for Cycles Per Instruction, which means the <strong>number of cycles per instruction</strong>. Additionally, in some contexts, you may also encounter IPC, which stands for Instructions Per Cycle, meaning the <strong>number of instructions per cycle</strong>.</p>
<blockquote>
<p>The smaller the CPI value, the higher the instruction execution efficiency of the computer system.</p>
</blockquote>
<p>The relationship between CPI and IPC is: CPI &#x3D; 1 &#x2F; IPC</p>
<p><strong>In the context of single CPU program execution performance</strong>, it can actually be expressed as:</p>
<p><img src="https://pic.imgdb.cn/item/6691e5acd9c307b7e994e785.png" alt="img"></p>
<p>Due to the limitations of silicon material and manufacturing processes, increasing the processor’s clock speed has reached a bottleneck. Therefore, improving program performance mainly depends on two variables: Instruction Count and CPI.</p>
<p>Typically, by examining the CPI value, we can roughly determine whether a compute-intensive task is CPU-bound or memory-bound:</p>
<ul>
<li>CPI less than 1: The program is usually CPU-bound.</li>
<li>CPI greater than 1: The program is usually memory-bound.</li>
</ul>
<p>This is just a rough estimation method. Different types of tasks may have different CPI value ranges, so it is necessary to judge based on actual circumstances. Additionally, other factors such as memory size, bandwidth, and CPU cache must be considered for a more comprehensive assessment of the task type.</p>
<p>A key criterion for evaluating the efficiency of a compute-intensive task is the CPU utilization during the program’s execution. Many people believe that high CPU utilization indicates that the program’s code is running intensely. In fact, high CPU utilization can also mean that the CPU is <strong>busy-waiting</strong> for some resources (not iowait), such as encountering bottlenecks when accessing memory.</p>
<p>Some compute-intensive tasks normally have a low CPI and good performance. The CPU utilization is very high. However, as system load increases and other tasks compete for system resources, the CPI of these compute tasks can significantly rise, leading to a drop in performance. At this time, CPU utilization might still appear high, but this high utilization actually reflects CPU busy-waiting and the effects of pipeline stalls.</p>
<p>Brendan Gregg pointed out in his blog “CPU Utilization is Wrong” that CPU utilization metrics need to be analyzed in conjunction with CPI&#x2F;IPC metrics.</p>
<p>By using <code>perf record</code> to generate a CPI flame graph, one can show the association between the program’s call stack and CPU occupancy, and also reveal which parts of the CPU occupancy represent actual effective runtime and which parts are due to CPU busy-waiting caused by some stalls.</p>
<p>This tool can generally help identify system resource bottlenecks and provide ways to mitigate these bottlenecks; for example, interference from cache thrashing between applications can be resolved by binding applications to different CPUs.</p>
<p>Application developers can improve program performance by optimizing relevant functions. For instance, by optimizing code to reduce cache misses, thereby lowering the application’s CPI and reducing performance issues caused by memory access stalls.</p>
<h4 id="b-LLC"><a href="#b-LLC" class="headerlink" title="b. LLC"></a>b. LLC</h4><p>Older CPUs had two levels of cache (L1 and L2), while newer CPUs have three levels of cache (L1, L2, and L3), as shown in the following diagram:</p>
<img src="https://pic2.zhimg.com/80/v2-f4551e163f574dfe4a98dc1847272e05_720w.webp" alt="img" style="zoom:50%;" />

<ul>
<li><p>L1 cache is divided into two types: instruction cache and data cache. L2 and L3 caches do not differentiate between instructions and data.</p>
</li>
<li><p>L1 and L2 caches are located within each CPU core, while the L3 cache is shared among all CPU cores.</p>
</li>
<li><p>The closer the cache (L1, L2, L3) is to the CPU, the smaller and faster it is; the farther it is from the CPU, the slower it becomes.</p>
<p><img src="https://frankdenneman.nl/wp-content/uploads/2019/10/03-Rome-Chiplet.png" alt="img"></p>
</li>
</ul>
<p>The LLC (Last Level Cache) cache resources are crucial for job performance, and interference on these resources cannot be ignored. When multiple applications share the cache, they may experience mutual replacement issues. When LLC is ineffective, the execution time of memory access instructions can increase from 15ns to 70ns. Assuming a CPU clock speed of 3 GHz, this results in each memory access instruction consuming an additional 200 or more cycles to complete. To mitigate such interference, resource partitioning techniques can be employed to physically separate multiple jobs’ access to shared resources. The diagram above shows a classic multi-core architecture where multiple CPUs share the LLC. Jobs running on different CPUs may contend for LLC resources. The Intel Cascade Lake microarchitecture and AMD’s Rome chiplet reduce inter-core competition for LLC by providing each core with its own independent LLC. However, multiple applications running on the same CPU can still experience cache replacement issues when running in a mixed deployment, necessitating application-level cache partitioning techniques. To achieve application-level cache partitioning, Intel introduced RDT (Resource Director Technology), which includes CAT (Cache Allocation Technology). CAT allows for the allocation of private cache space to processes or cgroups to avoid cache replacement.</p>
<p>The LLC cache hit rate and miss rate are typically calculated as follows:</p>
<ul>
<li>LLC Cache Hit Rate &#x3D; L3_CACHE_HITS &#x2F; L3_CACHE_REFERENCES</li>
<li>LLC Cache Miss Rate &#x3D; L3_CACHE_MISSES &#x2F; L3_CACHE_REFERENCES</li>
</ul>
<p>Here, L3_CACHE_REFERENCES represents the event counter for all LLC cache accesses, L3_CACHE_HITS represents the event counter for LLC cache hits, and L3_CACHE_MISSES represents the event counter for LLC cache misses.</p>
<p>It is important to note that these event counters are not simple accumulative counters; they need to be processed and normalized to obtain accurate results. Detailed processing methods can be found in the documentation for tools like <code>pcm-exporter</code> or other similar resources.</p>
<p>In a containerized environment, a streaming application running inside a container that continuously reads and writes data can consume a large amount of LLC space. This can lead to data required by an LS application running in another container on the same machine being evicted from the LLC, resulting in decreased performance for the LS application.<br><img src="https://lynnapan.github.io/images/cache/8.png" alt="img"></p>
<h3 id="Metric-Collection"><a href="#Metric-Collection" class="headerlink" title="Metric Collection"></a>Metric Collection</h3><p>Several implementation paths:</p>
<ol>
<li><p><strong>Using cgroup <code>perf_event</code> to obtain CPI metrics for all applications on the host:</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unix.IoctlSetInt(p.fd, unix.PERF_EVENT_IOC_ENABLE, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Using node <code>perf</code> to obtain CPI metrics for each CPU:</strong></p>
<p>This approach involves using Go’s implementation, which requires locking the OS and then utilizing <code>perf_event_open</code>.</p>
</li>
<li><p><strong>Using cAdvisor with the <code>libpfm</code> tool:</strong></p>
<p>This requires using cgo, with <code>libpfm</code> relying on <code>perf_event_open</code> at a lower level.</p>
</li>
</ol>
<h4 id="a-Node-Exporter"><a href="#a-Node-Exporter" class="headerlink" title="a. Node Exporter"></a>a. Node Exporter</h4><p>Currently, node exporter only supports CPU-level metrics. For more details, refer to the <a target="_blank" rel="noopener" href="https://github.com/prometheus/node_exporter/pull/1274">implementation</a>.</p>
<h4 id="b-cgroup-perf-event"><a href="#b-cgroup-perf-event" class="headerlink" title="b. cgroup perf_event"></a>b. cgroup <code>perf_event</code></h4><p>This approach aims to support cgroup-level metrics, allowing monitoring of all threads belonging to a specific group and threads running on a specific CPU. For more information, see <a target="_blank" rel="noopener" href="https://lwn.net/Articles/421574/">LWN.net</a>. cAdvisor supports cgroup <code>perf_event</code>, and its <a target="_blank" rel="noopener" href="https://github.com/google/cadvisor/blob/a52ec5d60cf70b22f8b6d204780aec7a222cf6bb/manager/manager.go">implementation</a> can be reviewed for details.</p>
<p>Other metric collection methods:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/intel/pcm">Intel PCM</a></li>
</ul>
<h3 id="Intel-RDT"><a href="#Intel-RDT" class="headerlink" title="Intel RDT"></a>Intel RDT</h3><p>Previously, solutions involved controlling virtual machine logical resources (cgroups), but this approach was too coarse-grained and couldn’t manage sensitive and scarce processor caches effectively. To address this, Intel introduced RDT (Resource Director Technology), which provides more precise control. For more details, refer to the <a target="_blank" rel="noopener" href="https://cloud-atlas.readthedocs.io/zh_CN/latest/kernel/cpu/intel/intel_rdt/intel_rdt_arch.html">related introduction</a>.</p>
<p>RDT, which stands for Resource Director Technology, offers two main capabilities: monitoring and allocation. It enables users to directly monitor and allocate L2 and L3 caches (LLC) and memory bandwidth for each CPU core (or each logical core after Hyper-Threading) using a set of CPU instructions.</p>
<p>The Intel RDT implementation architecture was introduced in Linux Kernel 4.10, which provided L3 Cache Allocation Technology (CAT), L3 Code and Data Prioritization (CDP), and L2 CAT through the <code>resctrl</code> filesystem. Linux Kernel 4.12 further introduced support for Memory Bandwidth Allocation (MBA) for memory bandwidth management.</p>
<p>Intel RDT provides a series of allocation (resource control) capabilities, including Cache Allocation Technology (CAT), Code and Data Prioritization (CDP), and Memory Bandwidth Allocation (MBA).</p>
<p>The Intel Xeon E5-xxxx v4 series (Broadwell) offers L3 cache configuration and CAT mechanisms, with some communication-related features introduced in the E5-xxxx v3 series (Haswell). Some Intel processor series (e.g., Intel Atom processors) may support control of L2 caches. Additionally, the MBA functionality provides memory bandwidth management at the processor core level.</p>
<p>To use resource allocation technologies in Linux, the <code>resctrl</code> interface needs to be introduced in both the kernel and user space. From Linux Kernel 4.10 onwards, L3 CAT, L3 CDP, and L2 CAT are available with the <code>resctrl</code> architecture. Starting with Linux Kernel 4.12, MBA technology was introduced and is under development. For kernel usage instructions, see the <a target="_blank" rel="noopener" href="https://cloud-atlas.readthedocs.io/zh_CN/latest/kernel/cpu/intel/intel_rdt/intel_rdt_arch.html">kernel documentation</a>.</p>
<h5 id="RDT-Technology-Architecture"><a href="#RDT-Technology-Architecture" class="headerlink" title="RDT Technology Architecture"></a>RDT Technology Architecture</h5><p>The core goal of Cache Allocation Technology (CAT) is to allocate resources based on Class of Service (COS or CLOS). Applications or individual threads can be tagged according to a series of service levels provided by the processor. This allows the allocation and restriction of cache usage based on the service classification of applications and threads. Each CLOS can use Capacity Bitmasks (CBMs) to indicate and specify the degree of overlap or isolation in service classification.</p>
<p>For each logical processor, there is a register (known as <code>IA32_PQR_ASSOC</code> MSR or PQR) that allows the operating system (OS) or Virtual Machine Monitor (VMM) to specify the CLOS when scheduling applications, threads, or virtual machines (VMs).</p>
<p>RDT is divided into five functional modules:</p>
<ul>
<li><strong>Cache Monitoring Technology (CMT)</strong>: Cache monitoring</li>
<li><strong>Cache Allocation Technology (CAT)</strong>: Cache allocation</li>
<li><strong>Memory Bandwidth Monitoring (MBM)</strong>: Memory bandwidth monitoring</li>
<li><strong>Memory Bandwidth Allocation (MBA)</strong>: Memory bandwidth allocation</li>
<li><strong>Code and Data Prioritization (CDP)</strong>: Code and data prioritization</li>
</ul>
<blockquote>
<p>RDT technology targets caches and memory bandwidth, divided into monitoring and control, forming four functional modules. Adding Code and Data Prioritization (control technology) results in a total of five functional modules.</p>
</blockquote>
<img src="https://pic.imgdb.cn/item/6691e693d9c307b7e995d1f8.png" alt="英特尔® RDT 内核架构" style="zoom:50%;" />

<p>After enabling RDT control, you can create user directories in the root directory (e.g., “CG1” and “CG2”, as shown in Figure 4: Intel® RDT Hierarchy in the resctrl Filesystem) and specify different levels of control for each shared resource. The RDT control groups include the following files:</p>
<ul>
<li><strong>“tasks”</strong>: Reading this file displays a list of all tasks in the group. Writing task IDs to this file adds tasks to the group.</li>
<li><strong>“cpus”</strong>: Reading this file displays the bitmask of logical CPUs owned by the group. Writing a bitmask to this file adds CPUs to the group or removes CPUs from the group.</li>
<li><strong>“schemata”</strong>: A list of all resources accessible by the group.</li>
</ul>
<p>After enabling RDT monitoring features, the root directory and other top-level directories will include a “mon_groups” directory, where user directories (e.g., “M1” and “M2”, as shown in Figure 4: Intel® RDT Hierarchy in the resctrl Filesystem) can be created to monitor task groups. The “Mon_data” directory contains a set of files organized by resource domain and RDT events. Each directory within “Mon_data” has files for each event (e.g., “llc_occupancy”, “mbm_total_bytes”, and “mbm_local_bytes”). These files provide counters for the current values of events for all tasks in the group.<br><img src="https://pic.imgdb.cn/item/6691e6c8d9c307b7e9960b0d.png" alt="英特尔® RDT 在 resctrl 文件系统中的监测和控制示意图" style="zoom:50%;" /></p>
<h2 id="Theoretical-Foundation"><a href="#Theoretical-Foundation" class="headerlink" title="Theoretical Foundation"></a>Theoretical Foundation</h2><h3 id="CPI2-CPU-Performance-Isolation-for-Shared-Compute-Clusters"><a href="#CPI2-CPU-Performance-Isolation-for-Shared-Compute-Clusters" class="headerlink" title="CPI2: CPU Performance Isolation for Shared Compute Clusters"></a>CPI2: CPU Performance Isolation for Shared Compute Clusters</h3><h4 id="Performance-Metrics"><a href="#Performance-Metrics" class="headerlink" title="Performance Metrics"></a>Performance Metrics</h4><p>CPI</p>
<h4 id="Core-Methodology"><a href="#Core-Methodology" class="headerlink" title="Core Methodology"></a>Core Methodology</h4><p>Google’s approach relies entirely on statistical analysis based on historical data, without requiring separate stress testing, making the method straightforward. Google demonstrated the correlation between CPI and RT (Response Time) using historical data, finding a correlation of 0.97 for <strong>leaf-level links</strong> primarily for <strong>CPU-bound</strong> applications. Other services, such as some I&#x2F;O-bound services and intermediate node services, still showed a correlation above 0.7. Thus, CPI was confirmed as a valid proxy for performance.</p>
<p>Online jobs are typically long-running tasks, and their CPI trends on the same CPU model usually follow a predictable pattern. Therefore, traditional <strong>sliding window prediction</strong> methods are used to forecast the CPI for the next period.</p>
<img src="https://justadogistaken.github.io/images/cpi-1.png" alt="/images/cpi-1.png" style="zoom:50%;" />

<p>Furthermore, the distribution of CPI data remains relatively consistent day-to-day, allowing the use of statistical methods to calculate the average CPI (CPIavg) and standard deviation (stddev) from the previous day. A threshold is set at CPIavg + 2 * stddev; if the CPI exceeds this value, QoS (Quality of Service) is considered to be impacted. Additionally, to avoid false positives, the rule requires that this threshold be exceeded three times within a 5-minute window before determining that QoS is affected.<br><img src="https://justadogistaken.github.io/images/cpi-2.png" alt="/images/cpi-2.png" style="zoom:30%;" /></p>
<h4 id="Conclusions"><a href="#Conclusions" class="headerlink" title="Conclusions"></a>Conclusions</h4><p>Experimental data indicate that the linear correlation coefficient between CPI and interference is 0.97.</p>
<h3 id="LIBRA-Clearing-the-Cloud-Through-Dynamic-Memory-Bandwidth-Management"><a href="#LIBRA-Clearing-the-Cloud-Through-Dynamic-Memory-Bandwidth-Management" class="headerlink" title="LIBRA: Clearing the Cloud Through Dynamic Memory Bandwidth Management"></a>LIBRA: Clearing the Cloud Through Dynamic Memory Bandwidth Management</h3><h4 id="Performance-Metrics-1"><a href="#Performance-Metrics-1" class="headerlink" title="Performance Metrics"></a>Performance Metrics</h4><p>CPI</p>
<h4 id="Core-Methodology-1"><a href="#Core-Methodology-1" class="headerlink" title="Core Methodology"></a>Core Methodology</h4><p>The primary contribution of this article from Alibaba is in how to adjust LLC (Last Level Cache) more finely. Intel RDT provides two technologies—CAT (Cache Allocation Technology) and MBA (Memory Bandwidth Allocation)—which are similar to cgroups in usage. Due to the slow integration into container runtimes, Intel open-sourced <code>intel-resource-manager</code> to support these technologies. CAT isolates LLC size, while MBA isolates L2-L3 memory bandwidth. However, the adjustment granularity for these two dimensions is 10%, which is too coarse. Alibaba combined CAT and MBA to achieve finer-grained adjustments.</p>
<p>In this approach, CPI is used for interference detection, but Alibaba calculated it through stress testing. They established a linear relationship <code>RT = k * CPI + l</code> to relate RT (Response Time) to CPI. Real-time CPI data is then used to estimate RT values and assess whether application QoS exceeds SLA (Service Level Agreement).</p>
<h4 id="Conclusions-1"><a href="#Conclusions-1" class="headerlink" title="Conclusions"></a>Conclusions</h4><p>CPI is linearly related to interference. By calculating RT from CPI, adjustments to LLC and MBA can be made to manage resource isolation effectively.</p>
<h3 id="PARTIES-QoS-Aware-Resource-Partitioning-for-Multiple-Interactive-Services"><a href="#PARTIES-QoS-Aware-Resource-Partitioning-for-Multiple-Interactive-Services" class="headerlink" title="PARTIES: QoS-Aware Resource Partitioning for Multiple Interactive Services"></a>PARTIES: QoS-Aware Resource Partitioning for Multiple Interactive Services</h3><h4 id="Metrics"><a href="#Metrics" class="headerlink" title="Metrics"></a>Metrics</h4><p>Latency (ms)</p>
<h4 id="Core-Methodology-2"><a href="#Core-Methodology-2" class="headerlink" title="Core Methodology"></a>Core Methodology</h4><p>Stress testing is used to determine the optimal latency target QoS for single applications (by applying pressure until the latency-pressure curve shows an inflection point). Resources are categorized as &lt;cpu core, cache way, cpu frequency, memory space, disk bandwidth&gt;, with corresponding adjustment granularity of &lt;1 core, 1 way, 100 MHz, 1 GB, 1 GB&#x2F;s&gt;. QoS is checked every 500 ms, and if deviations from target QoS are detected, resources are adjusted. For each application, different resource adjustments are attempted each round (similar to guessing the resource causing interference) until the QoS for all applications on the machine is ensured. The article provides a good approach by treating resources as interchangeable. For example, when interference is detected, resources are not uniformly scaled up or down; instead, resources are exchanged, such as reallocating CPU from I&#x2F;O-intensive applications to CPU-intensive ones, ensuring that each application has the appropriate resources.</p>
<p>Due to the author’s limited time, perspective, and understanding, there may be errors or omissions in this article. Feedback and corrections from readers and industry experts are welcomed. The troubleshooting information above has been updated to reflect community content.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1759977">Caelus—全场景在离线混部解决方案</a></li>
<li>Google Borg 2015：<a target="_blank" rel="noopener" href="https://research.google/pubs/pub43438/">https://research.google/pubs/pub43438/</a></li>
<li>Google Borg 2019：<a target="_blank" rel="noopener" href="https://dl.acm.org/doi/pdf/10.1145/3342195.3387517">https://dl.acm.org/doi/pdf/10.1145/3342195.3387517</a></li>
<li>Google Autopilot：<a target="_blank" rel="noopener" href="https://dl.acm.org/doi/pdf/10.1145/3342195.3387524">https://dl.acm.org/doi/pdf/10.1145/3342195.3387524</a></li>
<li>百度千寻：<a target="_blank" rel="noopener" href="https://www.infoq.cn/article/aEut*ZAIffp0q4MSKDSg">百度大规模战略性混部系统演进</a></li>
<li>阿里伏羲：<a target="_blank" rel="noopener" href="https://yq.aliyun.com/articles/651202">https://yq.aliyun.com/articles/651202</a></li>
<li>阿里k8s混部：<a target="_blank" rel="noopener" href="https://static.sched.com/hosted_files/kccncosschn19chi/70/ColocationOnK8s.pdf">https://static.sched.com/hosted_files/kccncosschn19chi/70/ColocationOnK8s.pdf</a></li>
<li>CPI论文: <a target="_blank" rel="noopener" href="https://static.googleusercontent.com/media/research.google.com/zh-CN//pubs/archive/40737.pdf">https://static.googleusercontent.com/media/research.google.com/zh-CN//pubs/archive/40737.pdf</a></li>
<li>Heracles论文：<a target="_blank" rel="noopener" href="https://static.googleusercontent.com/media/research.google.com/zh-CN//pubs/archive/43792.pdf">https://static.googleusercontent.com/media/research.google.com/zh-CN//pubs/archive/43792.pdf</a></li>
<li>Bubble-up论文：<a target="_blank" rel="noopener" href="https://ieeexplore.ieee.org/document/7851476">https://ieeexplore.ieee.org/document/7851476</a></li>
<li><a target="_blank" rel="noopener" href="http://terenceli.github.io/%E6%8A%80%E6%9C%AF/2020/08/29/perf-arch">Linux kernel perf architecture (terenceli.github.io)</a></li>
<li><a target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/articles/technical/noisy-neighbors-problem-in-kubernetes.html">resolving noisy neighbors (intel.com)</a></li>
<li><a target="_blank" rel="noopener" href="https://facebookmicrosites.github.io/cgroup2/docs/overview.html">Maximizing Resource Utilization with cgroup2</a></li>
<li><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/customer-spotlight/cases/bytedance-performance-evaluation-optimization.html">字节跳动：混布环境下集群的性能评估与优化</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/tencent-cloud-native/p/14754230.html">混部之殇-论云原生资源隔离技术之CPU隔离(一) </a></li>
<li><a target="_blank" rel="noopener" href="https://patents.google.com/patent/CN106776005A/zh">CN106776005A - 一种面向容器化应用的资源管理系统及方法</a></li>
<li><a target="_blank" rel="noopener" href="https://www.aboutyun.com/thread-27867-1-1.html">阿里K8s之动态解决容器资源按需分配</a></li>
<li><a target="_blank" rel="noopener" href="https://justadogistaken.github.io/posts/handle-interference/">混部场景下的单机服务质量保障 </a></li>
<li>[Cache高速缓存和缓存隔离](<a target="_blank" rel="noopener" href="https://lynnapan.github.io/2017/04/18/understand">https://lynnapan.github.io/2017/04/18/understand</a> Cache&#x2F;)</li>
<li><a target="_blank" rel="noopener" href="https://github.com/hodgesds/perf-utils">hodgesds&#x2F;perf-utils</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1517979">用CPI火焰图分析Linux性能问题</a></li>
<li><a target="_blank" rel="noopener" href="https://www.openeuler.org/zh/blog/rubik/index.html">openEuler资源利用率提升之道</a></li>
<li><a target="_blank" rel="noopener" href="http://jos.org.cn/html/2020/10/6066.htm">在离线混部作业调度与资源管理技术研究综述</a></li>
<li><a target="_blank" rel="noopener" href="https://qiankunli.github.io/2021/11/22/hybrid_deployment.html">从混部到统一调度</a></li>
</ol>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/categories/">Category</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a target="_blank" rel="noopener" href="http://github.com/zouyee">Projects</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Technical-Background"><span class="toc-number">1.</span> <span class="toc-text">Technical Background</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Terminology"><span class="toc-number">1.1.</span> <span class="toc-text">Terminology</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-CPI"><span class="toc-number">1.1.1.</span> <span class="toc-text">a. CPI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-LLC"><span class="toc-number">1.1.2.</span> <span class="toc-text">b. LLC</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Metric-Collection"><span class="toc-number">1.2.</span> <span class="toc-text">Metric Collection</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-Node-Exporter"><span class="toc-number">1.2.1.</span> <span class="toc-text">a. Node Exporter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-cgroup-perf-event"><span class="toc-number">1.2.2.</span> <span class="toc-text">b. cgroup perf_event</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Intel-RDT"><span class="toc-number">1.3.</span> <span class="toc-text">Intel RDT</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#RDT-Technology-Architecture"><span class="toc-number">1.3.0.1.</span> <span class="toc-text">RDT Technology Architecture</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Theoretical-Foundation"><span class="toc-number">2.</span> <span class="toc-text">Theoretical Foundation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CPI2-CPU-Performance-Isolation-for-Shared-Compute-Clusters"><span class="toc-number">2.1.</span> <span class="toc-text">CPI2: CPU Performance Isolation for Shared Compute Clusters</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Performance-Metrics"><span class="toc-number">2.1.1.</span> <span class="toc-text">Performance Metrics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Core-Methodology"><span class="toc-number">2.1.2.</span> <span class="toc-text">Core Methodology</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Conclusions"><span class="toc-number">2.1.3.</span> <span class="toc-text">Conclusions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LIBRA-Clearing-the-Cloud-Through-Dynamic-Memory-Bandwidth-Management"><span class="toc-number">2.2.</span> <span class="toc-text">LIBRA: Clearing the Cloud Through Dynamic Memory Bandwidth Management</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Performance-Metrics-1"><span class="toc-number">2.2.1.</span> <span class="toc-text">Performance Metrics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Core-Methodology-1"><span class="toc-number">2.2.2.</span> <span class="toc-text">Core Methodology</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Conclusions-1"><span class="toc-number">2.2.3.</span> <span class="toc-text">Conclusions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PARTIES-QoS-Aware-Resource-Partitioning-for-Multiple-Interactive-Services"><span class="toc-number">2.3.</span> <span class="toc-text">PARTIES: QoS-Aware Resource Partitioning for Multiple Interactive Services</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Metrics"><span class="toc-number">2.3.1.</span> <span class="toc-text">Metrics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Core-Methodology-2"><span class="toc-number">2.3.2.</span> <span class="toc-text">Core Methodology</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">3.</span> <span class="toc-text">Reference</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zoues.com/posts/48bcc63c/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zoues.com/posts/48bcc63c/&text=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zoues.com/posts/48bcc63c/&title=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zoues.com/posts/48bcc63c/&is_video=false&description=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Container Interference Detection and Mitigation:Part 1&body=Check out this article: https://zoues.com/posts/48bcc63c/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zoues.com/posts/48bcc63c/&title=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zoues.com/posts/48bcc63c/&title=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zoues.com/posts/48bcc63c/&title=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zoues.com/posts/48bcc63c/&title=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zoues.com/posts/48bcc63c/&name=Container Interference Detection and Mitigation:Part 1&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://zoues.com/posts/48bcc63c/&t=Container Interference Detection and Mitigation:Part 1"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2024
    zouyee
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="http://github.com/zouyee">Projects</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
